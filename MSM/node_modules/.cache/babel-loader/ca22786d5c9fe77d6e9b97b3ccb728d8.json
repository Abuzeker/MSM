{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/tzika/Desktop/Polymerlink-Front/polymerlink-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/tzika/Desktop/Polymerlink-Front/polymerlink-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/tzika/Desktop/Polymerlink-Front/polymerlink-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Col,Divider,Row,DatePicker,Card,Table,Select}from'antd';import React,{useState,useEffect}from'react';import{logdata_request,RealtimeData_Request}from'../../api';import{C3Model,G2Model}from'../../DataRequest/DataModel';import{ConvertMonentToDateTime,DataSortTime,GetDateTime}from'../../DataRequest/LogDataRequestWrap';import{Line}from'@antv/g2plot';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DTinitial=GetDateTime(1,1);var BlankPage,DTc3=[],DTg2=[];var C3DTRange=[],G2DTRange=[];DTc3.push(moment(DTinitial[2]));DTc3.push(moment(DTinitial[3]));DTg2=DTc3;var LogValue={\"C3Table\":[],\"G2Table\":[],\"C3Graph\":[],\"G2Graph\":[],\"C3Selected\":[],\"G2Selected\":[]};var RangePicker=DatePicker.RangePicker;var Option=Select.Option;var OptionC3=Object.keys(C3Model);var OptionG2=Object.keys(G2Model);var OptionSelectorC3=[];var OptionSelectorG2=[];LogValue['C3Selected']=[OptionC3[0],OptionC3[1]];LogValue['G2Selected']=[OptionG2[0],OptionG2[1]];OptionC3.forEach(function(element){OptionSelectorC3.push(/*#__PURE__*/_jsx(Option,{children:element},element));});OptionG2.forEach(function(element){OptionSelectorG2.push(/*#__PURE__*/_jsx(Option,{children:element},element));});var data_filterC3=OptionC3.map(function(obj){var cobj=[];cobj={text:obj,value:obj};return cobj;});var parseDMYhmC3=function parseDMYhmC3(s){var b=s.split(/\\D/);return new Date(b[2],b[1]-1,b[2],b[3],b[4]);};var columnsC3=[{title:'Parameter',dataIndex:'Parameter',filters:data_filterC3,filterMode:'tree',filterSearch:true,onFilter:function onFilter(value,record){return record.Parameter.includes(value);},width:'30%'},{title:'Value',dataIndex:'Value',sorter:function sorter(a,b){return a.Value-b.Value;}},{title:'Date',dataIndex:'date',sorter:function sorter(a,b){return parseDMYhmC3(a.date)-parseDMYhmC3(b.date);}}];var data_filterG2=OptionG2.map(function(obj){var cobj=[];cobj={text:obj,value:obj};return cobj;});var parseDMYhmG2=function parseDMYhmG2(s){var b=s.split(/\\D/);return new Date(b[2],b[1]-1,b[2],b[3],b[4]);};var columnsG2=[{title:'Parameter',dataIndex:'Parameter',filters:data_filterG2,filterMode:'tree',filterSearch:true,onFilter:function onFilter(value,record){return record.Parameter.includes(value);},width:'30%'},{title:'Value',dataIndex:'Value',sorter:function sorter(a,b){return a.Value-b.Value;}},{title:'Date',dataIndex:'date',sorter:function sorter(a,b){return parseDMYhmG2(a.date)-parseDMYhmG2(b.date);}}];var line,line2;var Line1DataLog=function Line1DataLog(){var _useState=useState({count:0}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];useEffect(function(){console.log('Reffect');line=new Line('C3Graph',{data:LogValue['C3Table'],xField:'date',yField:'Value',seriesField:'Parameter'});try{line.render();}catch(_unused){}line2=new Line('G2Graph',{data:LogValue['G2Table'],xField:'date',yField:'Value',seriesField:'Parameter'});try{line2.render();}catch(_unused2){}return function(){line.destroy();line2.destroy();};},[]);var UpdateTableData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(Parameter,StartTime,EndTime,Site,Line,Page,BufferName,Model){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return logdata_request(Parameter,StartTime,EndTime,Site,Line,Page);case 2:response=_context.sent;data=DataSortTime(response);LogValue[BufferName]=data;// console.log(response);\nsetState(function(_ref2){var count=_ref2.count;return{count:count+1};});case 6:case\"end\":return _context.stop();}}},_callee);}));return function UpdateTableData(_x,_x2,_x3,_x4,_x5,_x6,_x7,_x8){return _ref.apply(this,arguments);};}();var C3LogRequest=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(DT){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:DTc3=DT;console.log(DTc3);C3DTRange=ConvertMonentToDateTime(DT);console.log(C3DTRange);_context2.next=6;return UpdateTableData(LogValue['C3Selected'],C3DTRange[0],C3DTRange[1],'Polymerlink','C3','1',\"C3Table\",C3Model);case 6:console.log(LogValue[\"C3Table\"]);line.changeData(LogValue[\"C3Table\"]);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function C3LogRequest(_x9){return _ref3.apply(this,arguments);};}();var G2LogRequest=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(DT){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:DTg2=DT;G2DTRange=ConvertMonentToDateTime(DT);_context3.next=4;return UpdateTableData(LogValue['G2Selected'],G2DTRange[0],G2DTRange[1],'Polymerlink','G2',BlankPage,\"G2Table\",G2Model);case 4:line2.changeData(LogValue[\"G2Table\"]);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function G2LogRequest(_x10){return _ref4.apply(this,arguments);};}();var ChangeC3Select=function ChangeC3Select(value){LogValue['C3Selected']=value;};var ChangeG2Select=function ChangeG2Select(value){LogValue['G2Selected']=value;};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{paddingBottom:'10px'},children:/*#__PURE__*/_jsx(Divider,{orientation:\"left\",children:\"C3 Log Visualize\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingBottom:'10px'},children:[/*#__PURE__*/_jsx(RangePicker,{showTime:true,onOk:C3LogRequest}),/*#__PURE__*/_jsx(Button,{type:\"primary\",style:{marginLeft:'10px'},onClick:function onClick(){C3LogRequest(DTc3);},children:\"Update\"})]}),/*#__PURE__*/_jsx(Select,{mode:\"multiple\",size:\"middle\",placeholder:\"Please select\",defaultValue:[OptionC3[0],OptionC3[1]],style:{width:'100%',paddingBottom:'20px'},onChange:ChangeC3Select,children:OptionSelectorC3}),/*#__PURE__*/_jsx(Card,{title:\"Log Value C3\",bordered:true,style:{width:'100%',borderRadius:15,marginBottom:'10px'},hoverable:true,children:/*#__PURE__*/_jsx(Table,{bordered:true,columns:columnsC3,dataSource:LogValue['C3Table'],size:\"small\",scroll:{y:500},pagination:false})}),/*#__PURE__*/_jsx(Card,{title:'C3 Graph Visulize',bordered:true,style:{width:'100%',borderRadius:15,backgroundColor:'#ffffff'},hoverable:true,children:/*#__PURE__*/_jsx(\"div\",{id:\"C3Graph\"})}),/*#__PURE__*/_jsx(\"div\",{style:{paddingBottom:'10px',paddingTop:'20px'},children:/*#__PURE__*/_jsx(Divider,{orientation:\"left\",children:\"G2 Log Visualize\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingBottom:'10px'},children:[/*#__PURE__*/_jsx(RangePicker,{showTime:true,onOk:G2LogRequest}),/*#__PURE__*/_jsx(Button,{type:\"primary\",style:{marginLeft:'10px'},onClick:function onClick(){G2LogRequest(DTg2);},children:\"Update\"})]}),/*#__PURE__*/_jsx(Select,{mode:\"multiple\",size:\"middle\",placeholder:\"Please select\",defaultValue:[OptionG2[0],OptionG2[1]],style:{width:'100%',paddingBottom:'20px'},onChange:ChangeG2Select,children:OptionSelectorG2}),/*#__PURE__*/_jsx(Card,{title:\"Log Value G2\",bordered:true,style:{width:'100%',borderRadius:15,marginBottom:'10px'},hoverable:true,children:/*#__PURE__*/_jsx(Table,{bordered:true,columns:columnsG2,dataSource:LogValue['G2Table'],size:\"small\",scroll:{y:500},pagination:false})}),/*#__PURE__*/_jsx(Card,{title:'Log Value G2',bordered:true,style:{width:'100%',borderRadius:15,backgroundColor:'#ffffff'},hoverable:true,children:/*#__PURE__*/_jsx(\"div\",{id:\"G2Graph\"})})]});};export default Line1DataLog;","map":{"version":3,"sources":["C:/Users/tzika/Desktop/Polymerlink-Front/polymerlink-2/src/pages/Line1/Line1DataLog.jsx"],"names":["Button","Col","Divider","Row","DatePicker","Card","Table","Select","React","useState","useEffect","logdata_request","RealtimeData_Request","C3Model","G2Model","ConvertMonentToDateTime","DataSortTime","GetDateTime","Line","moment","DTinitial","BlankPage","DTc3","DTg2","C3DTRange","G2DTRange","push","LogValue","RangePicker","Option","OptionC3","Object","keys","OptionG2","OptionSelectorC3","OptionSelectorG2","forEach","element","data_filterC3","map","obj","cobj","text","value","parseDMYhmC3","s","b","split","Date","columnsC3","title","dataIndex","filters","filterMode","filterSearch","onFilter","record","Parameter","includes","width","sorter","a","Value","date","data_filterG2","parseDMYhmG2","columnsG2","line","line2","Line1DataLog","count","state","setState","console","log","data","xField","yField","seriesField","render","destroy","UpdateTableData","StartTime","EndTime","Site","Page","BufferName","Model","response","C3LogRequest","DT","changeData","G2LogRequest","ChangeC3Select","ChangeG2Select","paddingBottom","marginLeft","borderRadius","marginBottom","y","backgroundColor","paddingTop"],"mappings":"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","sourcesContent":["import { Button, Col, Divider, Row, DatePicker, Card, Table, Select } from 'antd'\r\nimport React, { useState, useEffect } from 'react'\r\nimport { logdata_request, RealtimeData_Request } from '../../api'\r\nimport { C3Model, G2Model } from '../../DataRequest/DataModel'\r\nimport { ConvertMonentToDateTime, DataSortTime, GetDateTime } from '../../DataRequest/LogDataRequestWrap'\r\nimport { Line } from '@antv/g2plot';\r\nimport moment from 'moment';\r\n\r\n\r\n\r\nlet DTinitial = GetDateTime(1,1)\r\nlet BlankPage, DTc3 = [] , DTg2 = []\r\nlet C3DTRange = [], G2DTRange = []\r\n\r\nDTc3.push(moment(DTinitial[2]))\r\nDTc3.push(moment(DTinitial[3]))\r\nDTg2 = DTc3\r\n\r\n\r\nlet LogValue = {\r\n    \"C3Table\": [],\r\n    \"G2Table\": [],\r\n    \"C3Graph\": [],\r\n    \"G2Graph\": [],\r\n    \"C3Selected\": [],\r\n    \"G2Selected\": [],\r\n}\r\nconst { RangePicker } = DatePicker;\r\nconst { Option } = Select;\r\n\r\n\r\nlet OptionC3 = Object.keys(C3Model)\r\nlet OptionG2 = Object.keys(G2Model)\r\n\r\nconst OptionSelectorC3 = [];\r\nconst OptionSelectorG2 = [];\r\n\r\nLogValue['C3Selected'] = [OptionC3[0], OptionC3[1]];\r\nLogValue['G2Selected'] = [OptionG2[0], OptionG2[1]];\r\n\r\nOptionC3.forEach(element => {\r\n    OptionSelectorC3.push(<Option key={element}>{element}</Option>)\r\n});\r\nOptionG2.forEach(element => {\r\n    OptionSelectorG2.push(<Option key={element}>{element}</Option>)\r\n});\r\n\r\nlet data_filterC3 = OptionC3.map(obj => {\r\n    let cobj = []\r\n\r\n    cobj = {\r\n        text: obj,\r\n        value: obj,\r\n    }\r\n    return cobj\r\n})\r\n\r\nconst parseDMYhmC3 = (s) => {\r\n    var b = s.split(/\\D/);\r\n    return new Date(b[2], b[1] - 1, b[2], b[3], b[4]);\r\n}\r\n\r\nconst columnsC3 = [\r\n    {\r\n        title: 'Parameter',\r\n        dataIndex: 'Parameter',\r\n        filters: data_filterC3,\r\n        filterMode: 'tree',\r\n        filterSearch: true,\r\n        onFilter: (value, record) => record.Parameter.includes(value),\r\n        width: '30%',\r\n    },\r\n    {\r\n        title: 'Value',\r\n        dataIndex: 'Value',\r\n        sorter: (a, b) => a.Value - b.Value,\r\n    },\r\n    {\r\n        title: 'Date',\r\n        dataIndex: 'date',\r\n        sorter: (a, b) => parseDMYhmC3(a.date) - parseDMYhmC3(b.date),\r\n    },\r\n];\r\n\r\n\r\n\r\nlet data_filterG2 = OptionG2.map(obj => {\r\n    let cobj = []\r\n\r\n    cobj = {\r\n        text: obj,\r\n        value: obj,\r\n    }\r\n    return cobj\r\n})\r\n\r\nconst parseDMYhmG2 = (s) => {\r\n    var b = s.split(/\\D/);\r\n    return new Date(b[2], b[1] - 1, b[2], b[3], b[4]);\r\n}\r\n\r\nconst columnsG2 = [\r\n    {\r\n        title: 'Parameter',\r\n        dataIndex: 'Parameter',\r\n        filters: data_filterG2,\r\n        filterMode: 'tree',\r\n        filterSearch: true,\r\n        onFilter: (value, record) => record.Parameter.includes(value),\r\n        width: '30%',\r\n    },\r\n    {\r\n        title: 'Value',\r\n        dataIndex: 'Value',\r\n        sorter: (a, b) => a.Value - b.Value,\r\n    },\r\n    {\r\n        title: 'Date',\r\n        dataIndex: 'date',\r\n        sorter: (a, b) => parseDMYhmG2(a.date) - parseDMYhmG2(b.date),\r\n    },\r\n];\r\n\r\nlet line, line2\r\n\r\nconst Line1DataLog = () => {\r\n\r\n    const [state, setState] = useState({ count: 0 });\r\n\r\n    useEffect(() => {\r\n        console.log('Reffect');\r\n\r\n        line = new Line('C3Graph', {\r\n            data: LogValue['C3Table'],\r\n            xField: 'date',\r\n            yField: 'Value',\r\n            seriesField: 'Parameter',\r\n        })\r\n\r\n        try { line.render() }\r\n        catch { }\r\n\r\n        line2 = new Line('G2Graph', {\r\n            data: LogValue['G2Table'],\r\n            xField: 'date',\r\n            yField: 'Value',\r\n            seriesField: 'Parameter',\r\n        })\r\n\r\n        try { line2.render() }\r\n        catch { }\r\n\r\n        return () => {\r\n            line.destroy();\r\n            line2.destroy();\r\n\r\n        }\r\n    }, [])\r\n\r\n    const UpdateTableData = async (Parameter, StartTime, EndTime, Site, Line, Page, BufferName, Model) => {\r\n        const response = await logdata_request(Parameter, StartTime, EndTime, Site, Line, Page)\r\n        let data = DataSortTime(response)\r\n        LogValue[BufferName] = data\r\n        // console.log(response);\r\n        setState(({ count }) => ({ count: count + 1 }));\r\n    }\r\n\r\n    const C3LogRequest = async (DT) => {\r\n        DTc3 = DT\r\n        console.log(DTc3);\r\n        C3DTRange = ConvertMonentToDateTime(DT)\r\n        console.log(C3DTRange);\r\n        await UpdateTableData(LogValue['C3Selected'], C3DTRange[0], C3DTRange[1], 'Polymerlink', 'C3', '1', \"C3Table\", C3Model)\r\n        console.log(LogValue[\"C3Table\"]);\r\n        line.changeData(LogValue[\"C3Table\"])\r\n    }\r\n\r\n    const G2LogRequest = async (DT) => {\r\n        DTg2 = DT\r\n        G2DTRange = ConvertMonentToDateTime(DT)\r\n        await UpdateTableData(LogValue['G2Selected'], G2DTRange[0], G2DTRange[1], 'Polymerlink', 'G2', BlankPage, \"G2Table\", G2Model)\r\n        line2.changeData(LogValue[\"G2Table\"])\r\n    }\r\n\r\n    const ChangeC3Select = (value) => {\r\n        LogValue['C3Selected'] = value\r\n    }\r\n\r\n    const ChangeG2Select = (value) => {\r\n        LogValue['G2Selected'] = value\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div style={{ paddingBottom: '10px' }}>\r\n                <Divider orientation=\"left\">C3 Log Visualize</Divider>\r\n            </div>\r\n            <div style={{ paddingBottom: '10px' }}>\r\n                <RangePicker showTime onOk={C3LogRequest} />\r\n                <Button type='primary' style={{ marginLeft: '10px' }} onClick={() => { C3LogRequest(DTc3) }}>Update</Button>\r\n            </div>\r\n            <Select\r\n                mode=\"multiple\"\r\n                size=\"middle\"\r\n                placeholder=\"Please select\"\r\n                defaultValue={[OptionC3[0], OptionC3[1]]}\r\n                style={{ width: '100%', paddingBottom: '20px' }}\r\n                onChange={ChangeC3Select}\r\n            >\r\n                {OptionSelectorC3}\r\n            </Select>\r\n\r\n            <Card title='Log Value C3' bordered={true}\r\n                style={{ width: '100%', borderRadius: 15, marginBottom: '10px' }} hoverable={true}>\r\n                <Table bordered columns={columnsC3} dataSource={LogValue['C3Table']} size=\"small\" scroll={{ y: 500 }} pagination={false} />\r\n            </Card>\r\n\r\n            <Card title={'C3 Graph Visulize'} bordered={true} style={{ width: '100%', borderRadius: 15, backgroundColor: '#ffffff' }} hoverable={true}>\r\n                <div id='C3Graph'></div>\r\n            </Card>\r\n\r\n\r\n            <div style={{ paddingBottom: '10px', paddingTop:'20px' }}>\r\n                <Divider orientation=\"left\">G2 Log Visualize</Divider>\r\n            </div>\r\n\r\n            <div style={{ paddingBottom: '10px' }}>\r\n                <RangePicker showTime onOk={G2LogRequest} />\r\n                <Button type='primary' style={{ marginLeft: '10px' }} onClick={() => { G2LogRequest(DTg2) }}>Update</Button>\r\n            </div>\r\n\r\n            <Select\r\n                mode=\"multiple\"\r\n                size=\"middle\"\r\n                placeholder=\"Please select\"\r\n                defaultValue={[OptionG2[0], OptionG2[1]]}\r\n                style={{ width: '100%', paddingBottom: '20px'   }}\r\n                onChange={ChangeG2Select}\r\n\r\n            >\r\n                {OptionSelectorG2}\r\n            </Select>\r\n\r\n            <Card title='Log Value G2' bordered={true}\r\n                style={{ width: '100%', borderRadius: 15, marginBottom: '10px' }} hoverable={true}>\r\n                <Table bordered columns={columnsG2} dataSource={LogValue['G2Table']} size=\"small\" scroll={{ y: 500 }} pagination={false} />\r\n            </Card>\r\n\r\n            <Card title={'Log Value G2'} bordered={true} style={{ width: '100%', borderRadius: 15, backgroundColor: '#ffffff' }} hoverable={true}>\r\n                <div id='G2Graph'></div>\r\n            </Card>\r\n\r\n\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Line1DataLog\r\n"]},"metadata":{},"sourceType":"module"}