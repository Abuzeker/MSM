{"ast":null,"code":"import{Button}from'antd';import moment from'moment';import XlsxPopulate from'xlsx-populate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var TableColumbTimeAsRow=function TableColumbTimeAsRow(){var Columb=[];var TimeRow=[];for(var i=0;i<24;i++){var n=void 0;i<10?n=\"0\".concat(i):n=i;TimeRow.push(\"\".concat(n,\":00\"));}Columb.push({title:'Parameter',width:100,dataIndex:'Parameter',key:'Parameter',fixed:'left',align:'center'});TimeRow.forEach(function(element){Columb.push({title:element,width:70,dataIndex:element,key:element,align:'center'});});return Columb;};export var TableColumbLabelAsRowG2=function TableColumbLabelAsRowG2(Datamodel,InputBagCallBack){var Columb=[];Columb.push({title:'Time',width:60,dataIndex:'Time',key:'Time',fixed:'left',align:'center'});var name=Object.keys(Datamodel);name.forEach(function(element){Columb.push({title:element,width:70,dataIndex:element,key:element,align:'center'});});Columb.push({title:'View',width:60,dataIndex:'View',key:'View',align:'center',render:function render(text,record,index){return/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){InputBagCallBack(record);},children:\" Click \"});}});//console.log(Columb);\nreturn Columb;};export var TableColumbLabelAsRow=function TableColumbLabelAsRow(Datamodel){var Columb=[];Columb.push({title:'Time',width:60,dataIndex:'Time',key:'Time',fixed:'left',align:'center'});var name=Object.keys(Datamodel);name.forEach(function(element){Columb.push({title:element,width:70,dataIndex:element,key:element,align:'center'});});//console.log(Columb);\nreturn Columb;};export var TableColumbJob=function TableColumbJob(Datamodel,Viewhandler,DeleteHandler,line,page,button1name,button2name){var Columb=[];var name=Object.keys(Datamodel);name.forEach(function(element){Columb.push({title:element,width:70,dataIndex:element,key:element,align:'center'});});Columb.push({title:\"\".concat(button1name),width:60,dataIndex:'View',key:'View',align:'center',render:function render(text,record,index){return/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){Viewhandler(record);},children:\" Click \"});}});Columb.push({title:\"\".concat(button2name),width:60,dataIndex:'Delete',key:'Delete',align:'center',render:function render(text,record,index){return/*#__PURE__*/_jsxs(Button,{onClick:function onClick(e){DeleteHandler(record,line,page);},children:[\" \",button2name,\" \"]});}});//console.log(Columb);\nreturn Columb;};export var TableColumbJobHome=function TableColumbJobHome(Datamodel,line,page,button1name,button2name){var Columb=[];Columb.push({title:'Line',width:70,dataIndex:'Line',key:'Line',align:'center'});var name=Object.keys(Datamodel);name.forEach(function(element){Columb.push({title:element,width:70,dataIndex:element,key:element,align:'center'});});//console.log(Columb);\nreturn Columb;};//offset initial date from today and offset ending date by today\nexport var GetDateTime=function GetDateTime(OffsetInitialDay,OffsetDayEnd){var DateTimeArray=[];var separator='-';var today=new Date();var tomorrow=new Date(today);tomorrow.setDate(tomorrow.getDate()+OffsetDayEnd);today.setDate(today.getDate()-OffsetInitialDay);var date1=today.getDate();var month1=today.getMonth()+1;var year1=today.getFullYear();var date2=tomorrow.getDate();var month2=tomorrow.getMonth()+1;var year2=tomorrow.getFullYear();var Start_time=\"\".concat(year1).concat(separator).concat(month1<10?\"0\".concat(month1):\"\".concat(month1)).concat(separator).concat(date1,\" 00:00:00\");var End_time=\"\".concat(year2).concat(separator).concat(month2<10?\"0\".concat(month2):\"\".concat(month2)).concat(separator).concat(date2,\" 00:00:00\");DateTimeArray[0]=moment(Start_time).toISOString(false).split('.')[0]+\"Z\";DateTimeArray[1]=moment(End_time).toISOString(false).split('.')[0]+\"Z\";DateTimeArray[2]=Start_time;DateTimeArray[3]=End_time;return DateTimeArray;};export var SetDateRange=function SetDateRange(datetime){var DateTime=[];var ReturnDT=[];//convert datepicker value to Z format\nDateTime[0]=moment(datetime,\"DD-MM-YYYY\").subtract(1,'days');DateTime[1]=datetime;//moment(datetime, \"DD-MM-YYYY\").add(1, 'days');\nReturnDT[0]=DateTime[0].toISOString(false).split('T')[0]+\"T16:00:00Z\";ReturnDT[1]=DateTime[1].toISOString(false).split('T')[0]+\"T15:00:00Z\";//console.log(ReturnDT)\nreturn ReturnDT;};//convert datetimepicker value to Z format\nexport var ConvertMonentToDateTime=function ConvertMonentToDateTime(momentDateTime){var DateTimeReturn=[];try{DateTimeReturn[0]=momentDateTime[0].toISOString(false).split('.')[0]+\"Z\";DateTimeReturn[1]=momentDateTime[1].toISOString(false).split('.')[0]+\"Z\";}catch(_unused){}return DateTimeReturn;};export var DataSortTime=function DataSortTime(response){var DataReturn;if(response.success===true){var data=response.data;DataReturn=data.map(function(obj){var cobj=[];var date_new=moment(obj.fields.DateCreated);var DateComponent=date_new.utc(true).format('DD-MM-YYYY HH:mm:ss');var TimeComponent=date_new.utc(true).format('HH:mm:ss');var ar0=TimeComponent.split(':');var ar1=ar0[0]+':'+ar0[1];// let SV = obj.fields.\ncobj={'key':\"\".concat(obj.fields.Parameter,\"  \").concat(DateComponent),'time':ar1,'date':DateComponent,'Parameter':obj.fields.Parameter,'Value':parseFloat(obj.fields.Value)};return cobj;});//console.log(DataReturn);\n}else{console.log(response);}return DataReturn;};export var ReportSort=function ReportSort(response){var DataReturn;if(response.success===true){var data=response.data;DataReturn=data.map(function(obj){var cobj=[];var DateTime_Start=moment(obj.fields.DateTime_Start).utc(true).format('DD-MM-YYYY HH:mm:ss');var DateTime_End=moment(obj.fields.DateTime_End).utc(true).format('DD-MM-YYYY HH:mm:ss');// let ar0 = TimeComponent.split(':')\n// let ar1 = ar0[0] + ':' + ar0[1]\ncobj={'key':obj.fields.Info1,'Line':obj.fields.Line,'Start Time':DateTime_Start,'End Time':DateTime_End,'Job No':obj.fields.Info1,'Grade':obj.fields.Info2,'Color':obj.fields.Info3};return cobj;});//console.log(DataReturn);\n}else{console.log(response);}return DataReturn;};export var LogDataMappingTime=function LogDataMappingTime(Datamodel,RawData){var name=Object.keys(Datamodel);var ReturnValue=[];var bufferModel={};bufferModel.Parameter=0;for(var i=0;i<24;i++){var n=void 0;i<10?n=\"0\".concat(i):n=i;bufferModel[\"\".concat(n,\":00\")]=0;}name.forEach(function(element){var Buffer={};Object.assign(Buffer,bufferModel);Buffer.Parameter=element;RawData.forEach(function(element2){if(element2.Parameter===element){Buffer[element2.time]=element2.Value;Buffer['key']=element2.Parameter;}});ReturnValue.push(Buffer);});return ReturnValue;};export var LogDataMappingName=function LogDataMappingName(Datamodel,RawData){var name=Object.keys(Datamodel);var prevtime=[],period=\"\",ReturnValue=[];var parasearch=function parasearch(item){if(item.date===period){return true;}return false;};RawData.forEach(function(element){if(element.date===prevtime){}else{prevtime=element.date;period=element.date;var data_buf3={};name.forEach(function(element){data_buf3[element]=0;});var data_buf2=RawData.filter(parasearch);data_buf2.map(function(obj){data_buf3['key']=obj.date;data_buf3['Time']=obj.date;data_buf3[obj.Parameter]=obj.Value;return data_buf3;});ReturnValue.push(data_buf3);}});return ReturnValue;};export var SortToArrayExcel=function SortToArrayExcel(DataJson,DataModel){console.log(DataJson);// let bufferArray = []\nvar bufferArray2=[];var para=Object.keys(DataJson[1]);var name=Object.keys(DataModel);var ReturnPara={Array:[],height:1,width:1};// console.log(para);\n// console.log(name);\n// bufferArray.push(DataJson[1]['Time'])\nDataJson.forEach(function(element){var bufferArray=[];bufferArray.push(element['Time']);name.forEach(function(element1){para.forEach(function(element2){// console.log('new');\n// console.log(element1);\n// console.log(element2);\nvar number;if(element2===element1){try{//console.log(element2);\nnumber=parseFloat(element[element2]);}catch(_unused2){console.log('error');number=parseFloat(0);}//console.log(LogValue['LogC3'][1][element2])\nbufferArray.push(number);}});});bufferArray2.push(bufferArray);});ReturnPara.Array=bufferArray2;ReturnPara.height=bufferArray2.length;ReturnPara.width=bufferArray2[0].length;return ReturnPara;};export var ExportExcelWorkBook=function ExportExcelWorkBook(DataJson,DataModel,startCol,startRow,endCol,endRow,FileName,JobInfo,Cell){fetch(FileName).then(function(res){return res.arrayBuffer();}).then(function(buffer){XlsxPopulate.fromDataAsync(buffer).then(function(workbook){// r = workbook.sheet(0).cell(\"A8\").value(\"foo\");\nvar setting=SortToArrayExcel(DataJson,DataModel);var r=workbook.sheet(0).range(\"\".concat(startCol).concat(startRow,\":\").concat(endCol).concat(endRow+setting.height));var Jobname=workbook.sheet(0).cell(Cell[0]).value(\"Job No: \".concat(JobInfo.Info1));var Grade=workbook.sheet(0).cell(Cell[1]).value(\"Grade: \".concat(JobInfo.Info5));var Colour=workbook.sheet(0).cell(Cell[2]).value(\"Colour: \".concat(JobInfo.Info4));var Start=workbook.sheet(0).cell(Cell[3]).value(\"Start: \".concat(JobInfo.Info2));var End=workbook.sheet(0).cell(Cell[4]).value(\"End: \".concat(JobInfo.Info3));r.value(setting.Array);workbook.outputAsync().then(function(blob){if(window.navigator&&window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(blob,\"out.xlsx\");}else{var url=window.URL.createObjectURL(blob);var a=document.createElement(\"a\");document.body.appendChild(a);a.href=url;a.download=FileName;a.click();window.URL.revokeObjectURL(url);document.body.removeChild(a);}});}).catch(function(err){return console.error(err);});});};export var FilterOutEndedJob=function FilterOutEndedJob(JobList){var FilterJob=[];var Current=new Date();var NowTime=new Date(moment(Current).format('DD-MM-yyyy HH:mm:ss'));//when wan to change datetime from (new dete()) to the usual view\nJobList.forEach(function(element){try{var DateBuf=new Date(element['End Time']);if(DateBuf>NowTime){FilterJob.push(element);}}catch(_unused3){}});return FilterJob;};export var VisualizeLogColumb=function VisualizeLogColumb(DataOption){var data_filter=DataOption.map(function(obj){var cobj=[];cobj={text:obj,value:obj};return cobj;});var parseDMYhm=function parseDMYhm(s){var b=s.split(/\\D/);return new Date(b[2],b[1]-1,b[2],b[3],b[4]);};var columns=[{title:'Parameter',dataIndex:'Parameter',filters:data_filter,filterMode:'tree',filterSearch:true,onFilter:function onFilter(value,record){return record.Parameter.includes(value);},width:'30%'},{title:'Value',dataIndex:'Value',sorter:function sorter(a,b){return a.Value-b.Value;}},{title:'time',dataIndex:'time',sorter:function sorter(a,b){return parseDMYhm(a.time)-parseDMYhm(b.time);}}];return columns;};","map":{"version":3,"sources":["C:/Users/tzika/Desktop/Polymerlink-Front/polymerlink-2/src/DataRequest/LogDataRequestWrap.js"],"names":["Button","moment","XlsxPopulate","TableColumbTimeAsRow","Columb","TimeRow","i","n","push","title","width","dataIndex","key","fixed","align","forEach","element","TableColumbLabelAsRowG2","Datamodel","InputBagCallBack","name","Object","keys","render","text","record","index","e","TableColumbLabelAsRow","TableColumbJob","Viewhandler","DeleteHandler","line","page","button1name","button2name","TableColumbJobHome","GetDateTime","OffsetInitialDay","OffsetDayEnd","DateTimeArray","separator","today","Date","tomorrow","setDate","getDate","date1","month1","getMonth","year1","getFullYear","date2","month2","year2","Start_time","End_time","toISOString","split","SetDateRange","datetime","DateTime","ReturnDT","subtract","ConvertMonentToDateTime","momentDateTime","DateTimeReturn","DataSortTime","response","DataReturn","success","data","map","obj","cobj","date_new","fields","DateCreated","DateComponent","utc","format","TimeComponent","ar0","ar1","Parameter","parseFloat","Value","console","log","ReportSort","DateTime_Start","DateTime_End","Info1","Line","Info2","Info3","LogDataMappingTime","RawData","ReturnValue","bufferModel","Buffer","assign","element2","time","LogDataMappingName","prevtime","period","parasearch","item","date","data_buf3","data_buf2","filter","SortToArrayExcel","DataJson","DataModel","bufferArray2","para","ReturnPara","Array","height","bufferArray","element1","number","length","ExportExcelWorkBook","startCol","startRow","endCol","endRow","FileName","JobInfo","Cell","fetch","then","res","arrayBuffer","buffer","fromDataAsync","workbook","setting","r","sheet","range","Jobname","cell","value","Grade","Info5","Colour","Info4","Start","End","outputAsync","blob","window","navigator","msSaveOrOpenBlob","url","URL","createObjectURL","a","document","createElement","body","appendChild","href","download","click","revokeObjectURL","removeChild","catch","err","error","FilterOutEndedJob","JobList","FilterJob","Current","NowTime","DateBuf","VisualizeLogColumb","DataOption","data_filter","parseDMYhm","s","b","columns","filters","filterMode","filterSearch","onFilter","includes","sorter"],"mappings":"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","sourcesContent":["import { Button } from 'antd';\r\nimport moment from 'moment';\r\nimport XlsxPopulate from 'xlsx-populate'\r\n\r\n\r\nexport const TableColumbTimeAsRow = () => {\r\n    let Columb = []\r\n    let TimeRow = []\r\n\r\n    for (let i = 0; i < 24; i++) {\r\n        let n\r\n        i < 10 ? n = `0${i}` : n = i\r\n        TimeRow.push(`${n}:00`)\r\n    }\r\n\r\n    Columb.push(\r\n        {\r\n            title: 'Parameter',\r\n            width: 100,\r\n            dataIndex: 'Parameter',\r\n            key: 'Parameter',\r\n            fixed: 'left',\r\n            align: 'center',\r\n        })\r\n\r\n    TimeRow.forEach(element => {\r\n        Columb.push(\r\n            {\r\n                title: element,\r\n                width: 70,\r\n                dataIndex: element,\r\n                key: element,\r\n                align: 'center',\r\n            }\r\n        )\r\n    });\r\n    return Columb\r\n}\r\n\r\nexport const TableColumbLabelAsRowG2 = (Datamodel, InputBagCallBack) => {\r\n    let Columb = []\r\n\r\n    Columb.push(\r\n        {\r\n            title: 'Time',\r\n            width: 60,\r\n            dataIndex: 'Time',\r\n            key: 'Time',\r\n            fixed: 'left',\r\n            align: 'center',\r\n        })\r\n\r\n    const name = Object.keys(Datamodel)\r\n    name.forEach(element => {\r\n        Columb.push(\r\n            {\r\n                title: element,\r\n                width: 70,\r\n                dataIndex: element,\r\n                key: element,\r\n                align: 'center',\r\n            }\r\n        )\r\n    })\r\n\r\n    Columb.push(\r\n        {\r\n            title: 'View',\r\n            width: 60,\r\n            dataIndex: 'View',\r\n            key: 'View',\r\n            align: 'center',\r\n            render: (text, record, index) => <Button onClick={\r\n                (e) => { InputBagCallBack(record) }\r\n            } > Click </Button>,\r\n        })\r\n\r\n    //console.log(Columb);\r\n    return Columb\r\n}\r\n\r\nexport const TableColumbLabelAsRow = (Datamodel) => {\r\n    let Columb = []\r\n\r\n    Columb.push(\r\n        {\r\n            title: 'Time',\r\n            width: 60,\r\n            dataIndex: 'Time',\r\n            key: 'Time',\r\n            fixed: 'left',\r\n            align: 'center',\r\n        })\r\n\r\n    const name = Object.keys(Datamodel)\r\n    name.forEach(element => {\r\n        Columb.push(\r\n            {\r\n                title: element,\r\n                width: 70,\r\n                dataIndex: element,\r\n                key: element,\r\n                align: 'center',\r\n            }\r\n        )\r\n    })\r\n\r\n    //console.log(Columb);\r\n    return Columb\r\n}\r\n\r\nexport const TableColumbJob = (Datamodel, Viewhandler, DeleteHandler, line, page, button1name, button2name) => {\r\n    let Columb = []\r\n\r\n    const name = Object.keys(Datamodel)\r\n    name.forEach(element => {\r\n        Columb.push(\r\n            {\r\n                title: element,\r\n                width: 70,\r\n                dataIndex: element,\r\n                key: element,\r\n                align: 'center',\r\n            }\r\n        )\r\n    })\r\n\r\n    Columb.push(\r\n        {\r\n            title: `${button1name}`,\r\n            width: 60,\r\n            dataIndex: 'View',\r\n            key: 'View',\r\n            align: 'center',\r\n            render: (text, record, index) => <Button onClick={\r\n                (e) => { Viewhandler(record) }\r\n            } > Click </Button>,\r\n        })\r\n\r\n    Columb.push(\r\n        {\r\n            title: `${button2name}`,\r\n            width: 60,\r\n            dataIndex: 'Delete',\r\n            key: 'Delete',\r\n            align: 'center',\r\n            render: (text, record, index) => <Button onClick={\r\n                (e) => { DeleteHandler(record, line, page) }\r\n            } > {button2name} </Button>,\r\n        })\r\n\r\n    //console.log(Columb);\r\n    return Columb\r\n}\r\n\r\nexport const TableColumbJobHome = (Datamodel,  line, page, button1name, button2name) => {\r\n    let Columb = []\r\n\r\n    Columb.push(\r\n        {\r\n            title: 'Line',\r\n            width: 70,\r\n            dataIndex: 'Line',\r\n            key: 'Line',\r\n            align: 'center',\r\n        })\r\n\r\n    const name = Object.keys(Datamodel)\r\n    name.forEach(element => {\r\n        Columb.push(\r\n            {\r\n                title: element,\r\n                width: 70,\r\n                dataIndex: element,\r\n                key: element,\r\n                align: 'center',\r\n            }\r\n        )\r\n    })\r\n\r\n    //console.log(Columb);\r\n    return Columb\r\n}\r\n\r\n//offset initial date from today and offset ending date by today\r\nexport const GetDateTime = (OffsetInitialDay, OffsetDayEnd) => {\r\n\r\n    let DateTimeArray = []\r\n    let separator = '-'\r\n\r\n    let today = new Date()\r\n    let tomorrow = new Date(today)\r\n    tomorrow.setDate(tomorrow.getDate() + OffsetDayEnd)\r\n    today.setDate(today.getDate() - OffsetInitialDay)\r\n\r\n    let date1 = today.getDate();\r\n    let month1 = today.getMonth() + 1;\r\n    let year1 = today.getFullYear();\r\n\r\n    let date2 = tomorrow.getDate();\r\n    let month2 = tomorrow.getMonth() + 1;\r\n    let year2 = tomorrow.getFullYear();\r\n\r\n\r\n    let Start_time = `${year1}${separator}${month1 < 10 ? `0${month1}` : `${month1}`}${separator}${date1} 00:00:00`\r\n    let End_time = `${year2}${separator}${month2 < 10 ? `0${month2}` : `${month2}`}${separator}${date2} 00:00:00`\r\n\r\n    DateTimeArray[0] = moment(Start_time).toISOString(false).split('.')[0] + \"Z\"\r\n    DateTimeArray[1] = moment(End_time).toISOString(false).split('.')[0] + \"Z\"\r\n    DateTimeArray[2] = Start_time\r\n    DateTimeArray[3] = End_time\r\n\r\n    return DateTimeArray\r\n}\r\n\r\nexport const SetDateRange = (datetime) => {\r\n    let DateTime = []\r\n    let ReturnDT = []\r\n    //convert datepicker value to Z format\r\n    DateTime[0] = moment(datetime, \"DD-MM-YYYY\").subtract(1, 'days')\r\n    DateTime[1] = datetime//moment(datetime, \"DD-MM-YYYY\").add(1, 'days');\r\n\r\n    ReturnDT[0] = DateTime[0].toISOString(false).split('T')[0] + \"T16:00:00Z\"\r\n    ReturnDT[1] = DateTime[1].toISOString(false).split('T')[0] + \"T15:00:00Z\"\r\n    //console.log(ReturnDT)\r\n    return ReturnDT\r\n}\r\n\r\n//convert datetimepicker value to Z format\r\nexport const ConvertMonentToDateTime = (momentDateTime) => {\r\n    let DateTimeReturn = []\r\n\r\n    try {\r\n        DateTimeReturn[0] = momentDateTime[0].toISOString(false).split('.')[0] + \"Z\"\r\n        DateTimeReturn[1] = momentDateTime[1].toISOString(false).split('.')[0] + \"Z\"\r\n    }\r\n    catch { }\r\n    return DateTimeReturn\r\n}\r\n\r\nexport const DataSortTime = (response) => {\r\n    let DataReturn\r\n    if (response.success === true) {\r\n        const data = response.data\r\n\r\n        DataReturn = data.map(obj => {\r\n            let cobj = []\r\n            let date_new = moment(obj.fields.DateCreated);\r\n            let DateComponent = date_new.utc(true).format('DD-MM-YYYY HH:mm:ss')\r\n            let TimeComponent = date_new.utc(true).format('HH:mm:ss')\r\n            let ar0 = TimeComponent.split(':')\r\n            let ar1 = ar0[0] + ':' + ar0[1]\r\n            // let SV = obj.fields.\r\n\r\n            cobj = {\r\n                'key': `${ obj.fields.Parameter}  ${DateComponent}`,\r\n                'time': ar1,\r\n                'date': DateComponent,\r\n                'Parameter': obj.fields.Parameter,\r\n                'Value':  parseFloat(obj.fields.Value),\r\n            }\r\n            return cobj\r\n        })\r\n        //console.log(DataReturn);\r\n    }\r\n    else {\r\n        console.log(response)\r\n    }\r\n    return DataReturn\r\n}\r\n\r\n\r\nexport const ReportSort = (response) => {\r\n    let DataReturn\r\n    if (response.success === true) {\r\n        const data = response.data\r\n\r\n        DataReturn = data.map(obj => {\r\n            let cobj = []\r\n            let DateTime_Start = (moment(obj.fields.DateTime_Start)).utc(true).format('DD-MM-YYYY HH:mm:ss')\r\n            let DateTime_End = (moment(obj.fields.DateTime_End)).utc(true).format('DD-MM-YYYY HH:mm:ss')\r\n            // let ar0 = TimeComponent.split(':')\r\n            // let ar1 = ar0[0] + ':' + ar0[1]\r\n\r\n            cobj = {\r\n                'key': obj.fields.Info1,\r\n                'Line': obj.fields.Line,\r\n                'Start Time': DateTime_Start,\r\n                'End Time': DateTime_End,\r\n                'Job No': obj.fields.Info1,\r\n                'Grade': obj.fields.Info2,\r\n                'Color': obj.fields.Info3,\r\n            }\r\n            return cobj\r\n        })\r\n        //console.log(DataReturn);\r\n    }\r\n    else {\r\n        console.log(response)\r\n    }\r\n    return DataReturn\r\n}\r\n\r\nexport const LogDataMappingTime = (Datamodel, RawData) => {\r\n    const name = Object.keys(Datamodel)\r\n    let ReturnValue = []\r\n    let bufferModel = {}\r\n    bufferModel.Parameter = 0\r\n\r\n    for (let i = 0; i < 24; i++) {\r\n        let n\r\n        i < 10 ? n = `0${i}` : n = i\r\n        bufferModel[`${n}:00`] = 0\r\n    }\r\n\r\n    name.forEach(element => {\r\n        let Buffer = {}\r\n        Object.assign(Buffer, bufferModel)\r\n        Buffer.Parameter = element\r\n\r\n        RawData.forEach(element2 => {\r\n            if (element2.Parameter === element) {\r\n                Buffer[element2.time] = element2.Value\r\n                Buffer['key'] = element2.Parameter\r\n            }\r\n        })\r\n        ReturnValue.push(Buffer)\r\n    })\r\n    return ReturnValue\r\n}\r\n\r\n\r\nexport const LogDataMappingName = (Datamodel, RawData) => {\r\n    const name = Object.keys(Datamodel)\r\n\r\n    let prevtime = [], period = \"\", ReturnValue = []\r\n\r\n    const parasearch = (item) => {\r\n        if (item.date === period) { return true; }\r\n        return false\r\n    }\r\n\r\n    RawData.forEach(element => {\r\n        if (element.date === prevtime) { }\r\n\r\n        else {\r\n            prevtime = element.date\r\n            period = element.date\r\n\r\n            let data_buf3 = {}\r\n\r\n            name.forEach(element => {\r\n                data_buf3[element] = 0\r\n            });\r\n\r\n            let data_buf2 = RawData.filter(parasearch)\r\n\r\n            data_buf2.map(obj => {\r\n                data_buf3['key'] = obj.date\r\n                data_buf3['Time'] = obj.date\r\n                data_buf3[obj.Parameter] = obj.Value\r\n                return data_buf3\r\n            })\r\n            ReturnValue.push(data_buf3)\r\n        }\r\n    })\r\n    return ReturnValue\r\n}\r\n\r\n\r\nexport const SortToArrayExcel = (DataJson, DataModel) => {\r\n    console.log(DataJson);\r\n    // let bufferArray = []\r\n    let bufferArray2 = []\r\n    const para = Object.keys(DataJson[1])\r\n    const name = Object.keys(DataModel)\r\n    let ReturnPara = {\r\n        Array: [],\r\n        height: 1,\r\n        width: 1\r\n    }\r\n    // console.log(para);\r\n    // console.log(name);\r\n    // bufferArray.push(DataJson[1]['Time'])\r\n\r\n    DataJson.forEach(element => {\r\n        let bufferArray = []\r\n        bufferArray.push(element['Time'])\r\n\r\n        name.forEach(element1 => {\r\n\r\n            para.forEach(element2 => {\r\n                // console.log('new');\r\n                // console.log(element1);\r\n                // console.log(element2);\r\n\r\n                let number\r\n\r\n                if (element2 === element1) {\r\n                    try {\r\n                        //console.log(element2);\r\n\r\n                        number = parseFloat(element[element2])\r\n                    }\r\n                    catch {\r\n                        console.log('error');\r\n                        number = parseFloat(0)\r\n                    }\r\n\r\n                    //console.log(LogValue['LogC3'][1][element2])\r\n                    bufferArray.push(number)\r\n                }\r\n            })\r\n\r\n        })\r\n        bufferArray2.push(bufferArray)\r\n    });\r\n\r\n    ReturnPara.Array = bufferArray2\r\n    ReturnPara.height = bufferArray2.length\r\n    ReturnPara.width = bufferArray2[0].length\r\n\r\n    return ReturnPara\r\n}\r\n\r\n\r\nexport const ExportExcelWorkBook = (DataJson, DataModel, startCol, startRow, endCol, endRow, FileName, JobInfo, Cell) => {\r\n\r\n    fetch(FileName)\r\n        .then(res => res.arrayBuffer())\r\n        .then(buffer => {\r\n            XlsxPopulate.fromDataAsync(buffer)\r\n                .then(workbook => {\r\n\r\n                    // r = workbook.sheet(0).cell(\"A8\").value(\"foo\");\r\n                    let setting = SortToArrayExcel(DataJson, DataModel)\r\n\r\n                    const r = workbook.sheet(0).range(`${startCol}${startRow}:${endCol}${endRow + setting.height}`);\r\n                    const Jobname = workbook.sheet(0).cell(Cell[0]).value(`Job No: ${JobInfo.Info1}`);\r\n                    const Grade = workbook.sheet(0).cell(Cell[1]).value(`Grade: ${JobInfo.Info5}`);\r\n                    const Colour = workbook.sheet(0).cell(Cell[2]).value(`Colour: ${JobInfo.Info4}`);\r\n                    const Start = workbook.sheet(0).cell(Cell[3]).value(`Start: ${JobInfo.Info2}`);\r\n                    const End = workbook.sheet(0).cell(Cell[4]).value(`End: ${JobInfo.Info3}`);\r\n\r\n\r\n\r\n\r\n                    r.value(setting.Array);\r\n\r\n                    workbook.outputAsync()\r\n                        .then(function (blob) {\r\n                            if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n                                window.navigator.msSaveOrOpenBlob(blob, \"out.xlsx\");\r\n                            }\r\n\r\n                            else {\r\n                                var url = window.URL.createObjectURL(blob);\r\n                                var a = document.createElement(\"a\");\r\n                                document.body.appendChild(a);\r\n                                a.href = url;\r\n                                a.download = FileName;\r\n                                a.click();\r\n                                window.URL.revokeObjectURL(url);\r\n                                document.body.removeChild(a);\r\n                            }\r\n                        });\r\n                })\r\n                .catch(err => console.error(err));\r\n        })\r\n}\r\n\r\nexport const FilterOutEndedJob = (JobList) => {\r\n    let FilterJob = []\r\n\r\n    const Current = new Date()\r\n    const NowTime =new Date( moment(Current).format('DD-MM-yyyy HH:mm:ss')) //when wan to change datetime from (new dete()) to the usual view\r\n\r\n    JobList.forEach(element => {\r\n        try {\r\n            let DateBuf = new Date(element['End Time'])\r\n\r\n            if(DateBuf > NowTime){\r\n                FilterJob.push(element)\r\n            }\r\n        }\r\n        catch { }\r\n    });\r\n\r\n    return FilterJob\r\n}\r\n\r\nexport const VisualizeLogColumb = (DataOption) =>{\r\n    \r\nlet data_filter = DataOption.map(obj => {\r\n    let cobj = []\r\n\r\n    cobj = {\r\n        text: obj,\r\n        value: obj,\r\n    }\r\n    return cobj\r\n})\r\n\r\nconst parseDMYhm = (s) => {\r\n    var b = s.split(/\\D/);\r\n    return new Date(b[2], b[1]-1, b[2], b[3], b[4]);  \r\n  }\r\n\r\nconst columns = [\r\n    {\r\n      title: 'Parameter',\r\n      dataIndex: 'Parameter',\r\n      filters: data_filter,\r\n      filterMode: 'tree',\r\n      filterSearch: true,\r\n      onFilter: (value, record) => record.Parameter.includes(value),\r\n      width: '30%',\r\n    },\r\n    {\r\n      title: 'Value',\r\n      dataIndex: 'Value',\r\n      sorter: (a, b) => a.Value - b.Value,  \r\n    },\r\n    {\r\n        title: 'time',\r\n        dataIndex: 'time',\r\n        sorter: (a, b) => parseDMYhm(a.time) - parseDMYhm(b.time),\r\n      },\r\n  ];\r\n\r\n  return columns\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}