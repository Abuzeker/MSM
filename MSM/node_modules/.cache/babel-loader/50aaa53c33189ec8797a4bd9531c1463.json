{"ast":null,"code":"import moment from'moment';export var DataSortRT=function DataSortRT(response){if(response.success!==false){var data=response.Data;var DataReturn=data.map(function(obj){var cobj=[];var ar0=moment(obj.fields.LastChange).utc(true).format('MM/DD/YY HH:mm:ss');cobj={'time':ar0,'Label':obj.fields.DisplayLabel,'Value':obj.fields.Value,'SV':obj.fields.SetValue,'Line':obj.fields.Line,'key':obj.fields.Label,'Page':obj.fields.Page,'label':obj.fields.Label,'LowThreshold':obj.fields.LowThreshold,'LowThreshold_active':obj.fields.LowThreshold,'HighThreshold':obj.fields.HighThreshold,'HighThreshold_active':obj.fields.HighThreshold_active};return cobj;});// console.log(data);\nreturn DataReturn;}else{console.log('Data Request Error');}};export var DataSortST=function DataSortST(response){if(response.success!==false){var data=response.Data;var DataReturn=data.map(function(obj){var cobj=[];var ar0=moment(obj.fields.LastChange).utc(true).format('MM/DD/YY HH:mm:ss');cobj={'time':ar0,'Parameter':obj.fields.DisplayLabel,'Line':obj.fields.Line,'key':obj.fields.Label,'label':obj.fields.Label,'LowThreshold':obj.fields.LowThreshold,'LowThreshold_active':obj.fields.LowThreshold,'HighThreshold':obj.fields.HighThreshold,'HighThreshold_active':obj.fields.HighThreshold_active};return cobj;});// console.log(data);\nreturn DataReturn;}else{console.log('Data Request Error');}};export var DataMapping=function DataMapping(Datamodel,RawData){var name=Object.keys(Datamodel);var ReturnValue=Datamodel;name.forEach(function(element){try{var DataFound=RawData.find(function(_ref){var Label=_ref.Label;return Label===element;});ReturnValue[element].PV=DataFound.Value;ReturnValue[element].SV=DataFound.SV;}catch(_unused){console.log('None');}// ReturnValue['Time'].PV = DataFound.time\n});return ReturnValue;};export var GraphDataFind=function GraphDataFind(SelectedLabel,RawData){var FoundDataArray=[];SelectedLabel.forEach(function(element){try{var obj={};var FoundData=RawData.find(function(_ref2){var Label=_ref2.Label;return Label===element;});obj['Label']=FoundData.Label;obj['time']=FoundData.time;obj['Value']=parseFloat(FoundData.Value);var CurrentTime=new Date();var LabelTime=new Date(obj['time']);var NewLabelTime=LabelTime.getTime()+30000;if(CurrentTime.getTime()<NewLabelTime){//console.log('NewData');\nFoundDataArray.push(obj);}else{//console.log('OldData');\n}}catch(_unused2){console.log('Data Not Found');}});//console.log(FoundDataArray);\nreturn FoundDataArray;};","map":{"version":3,"sources":["C:/Users/tzika/Desktop/Polymerlink-Front/polymerlink-2/src/DataRequest/RealTimeRequestWrap.js"],"names":["moment","DataSortRT","response","success","data","Data","DataReturn","map","obj","cobj","ar0","fields","LastChange","utc","format","DisplayLabel","Value","SetValue","Line","Label","Page","LowThreshold","HighThreshold","HighThreshold_active","console","log","DataSortST","DataMapping","Datamodel","RawData","name","Object","keys","ReturnValue","forEach","element","DataFound","find","PV","SV","GraphDataFind","SelectedLabel","FoundDataArray","FoundData","time","parseFloat","CurrentTime","Date","LabelTime","NewLabelTime","getTime","push"],"mappings":"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","sourcesContent":["import moment from 'moment';\r\n\r\n\r\nexport const DataSortRT = (response) => {\r\n\r\n    if (response.success !== false) {\r\n        const data = response.Data\r\n\r\n        let DataReturn = data.map(obj => {\r\n            let cobj = []\r\n            let ar0 = moment(obj.fields.LastChange).utc(true).format('MM/DD/YY HH:mm:ss')\r\n\r\n            cobj = {\r\n                'time': ar0,\r\n                'Label': obj.fields.DisplayLabel,\r\n                'Value': obj.fields.Value,\r\n                'SV': obj.fields.SetValue,\r\n                'Line': obj.fields.Line,\r\n                'key': obj.fields.Label,\r\n                'Page': obj.fields.Page,\r\n                'label': obj.fields.Label,\r\n                'LowThreshold' : obj.fields.LowThreshold,\r\n                'LowThreshold_active' : obj.fields.LowThreshold,\r\n                'HighThreshold' : obj.fields.HighThreshold,\r\n                'HighThreshold_active' : obj.fields.HighThreshold_active,\r\n\r\n            }\r\n            return cobj\r\n        })\r\n        // console.log(data);\r\n        return DataReturn\r\n    }\r\n    else {\r\n        console.log('Data Request Error');\r\n    }\r\n}\r\n\r\nexport const DataSortST = (response) => {\r\n\r\n    if (response.success !== false) {\r\n        const data = response.Data\r\n\r\n        let DataReturn = data.map(obj => {\r\n            let cobj = []\r\n            let ar0 = moment(obj.fields.LastChange).utc(true).format('MM/DD/YY HH:mm:ss')\r\n\r\n            cobj = {\r\n                'time': ar0,\r\n                'Parameter': obj.fields.DisplayLabel,\r\n                'Line': obj.fields.Line,\r\n                'key': obj.fields.Label,\r\n                'label': obj.fields.Label,\r\n                'LowThreshold' : obj.fields.LowThreshold,\r\n                'LowThreshold_active' : obj.fields.LowThreshold,\r\n                'HighThreshold' : obj.fields.HighThreshold,\r\n                'HighThreshold_active' : obj.fields.HighThreshold_active,\r\n\r\n            }\r\n            return cobj\r\n        })\r\n        // console.log(data);\r\n        return DataReturn\r\n    }\r\n    else {\r\n        console.log('Data Request Error');\r\n    }\r\n}\r\n\r\n\r\nexport const DataMapping = (Datamodel, RawData) => {\r\n\r\n    const name = Object.keys(Datamodel)\r\n    let ReturnValue = Datamodel\r\n    name.forEach(element => {\r\n        try {\r\n            let DataFound = RawData.find(({ Label }) => Label === element)\r\n            ReturnValue[element].PV = DataFound.Value\r\n            ReturnValue[element].SV = DataFound.SV\r\n        }\r\n        catch {\r\n            console.log('None');\r\n        }\r\n\r\n        // ReturnValue['Time'].PV = DataFound.time\r\n\r\n    });\r\n\r\n    return ReturnValue\r\n}\r\n\r\nexport const GraphDataFind = (SelectedLabel, RawData) => {\r\n\r\n    let FoundDataArray = []\r\n\r\n    SelectedLabel.forEach(element => {\r\n        try{\r\n            let obj = {}\r\n            let FoundData = RawData.find(({ Label }) => Label === element)\r\n            obj['Label'] = FoundData.Label\r\n            obj['time'] = FoundData.time\r\n            obj['Value'] = parseFloat(FoundData.Value)\r\n\r\n            var CurrentTime = new Date()\r\n            var LabelTime = new Date(obj['time'])\r\n            var NewLabelTime = LabelTime.getTime() + 30000\r\n\r\n            if( CurrentTime.getTime() < NewLabelTime ){\r\n                //console.log('NewData');\r\n                FoundDataArray.push(obj)\r\n            }\r\n            else{\r\n                //console.log('OldData');\r\n            }\r\n\r\n        }\r\n\r\n        catch{\r\n            console.log(('Data Not Found'));\r\n        }\r\n    })\r\n\r\n    //console.log(FoundDataArray);\r\n    \r\n    return FoundDataArray\r\n}\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}